config:
  runTime: "dockerCompose"
  version: ""
  framework: ""
  buildCommand: "docker-compose build"
  buildDir: "/"
  runCommand: "docker-compose up -d"
  icon: ""
  screenshot: ""

environments:
  - key: "INSTANCE"
    value: "dynamosoftware.chat-dev"
  - key: "SECRET_KEY"
    value: "random_password"
  - key: "POSTGRES_USER"
    value: "postgres"
  - key: "POSTGRES_PASSWORD"
    value: "random_password"
  - key: "POSTGRES_DB"
    value: "uru_chatbot"
  - key: "DATABASE_URL"
    value: "postgresql+asyncpg://[POSTGRES_USER]:[POSTGRES_PASSWORD]@db:5432/[POSTGRES_DB]"
  - key: "NEXT_PUBLIC_API_URL"
    value: "https://api.[CI_CD_DOMAIN]/api"
  - key: "CORS_ORIGINS"
    value: "[\"https://[CI_CD_DOMAIN]\",\"https://api.[CI_CD_DOMAIN]\"]"
  - key: "NODE_ENV"
    value: "production"

ports:
  - protocol: "HTTPS"
    targetProtocol: "HTTP"
    listeningPort: "443"
    targetPort: "3000"
    targetIP: "172.17.0.1"
    public: true
    path: "/"
    isAuth: false
  - protocol: "HTTPS"
    targetProtocol: "HTTP"
    listeningPort: "8443"
    targetPort: "8000"
    targetIP: "172.17.0.1"
    public: true
    path: "/"
    isAuth: false

lifeCycleConfig:
  preInstallCommand: ""
  postInstallCommand: ""
  preBackupCommand: ""
  postBackupCommand: ""
  preRestoreCommand: ""
  postRestoreCommand: ""
  postDeployCommand: ""

webUI:
  - url: "https://[CI_CD_DOMAIN]"
    label: "Uru Chatbot Frontend"
  - url: "https://api.[CI_CD_DOMAIN]/docs"
    label: "API Documentation"
