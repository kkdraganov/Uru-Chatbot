# Environment Variables for Elestio Deployment

## Elestio Configuration

The deployment uses Elestio's standard Docker Compose deployment with environment variable injection. All variables are defined in `elestio.yml` and automatically injected by Elestio's platform.

## Environment Variables

| Variable | Elestio Value | Description |
|----------|---------------|-------------|
| **INSTANCE** | `dynamosoftware.chat-dev` | Instance identifier for domain construction |
| **SECRET_KEY** | `random_password` | Auto-generated JWT secret |
| **POSTGRES_USER** | `postgres` | Database username |
| **POSTGRES_PASSWORD** | `random_password` | Auto-generated database password |
| **POSTGRES_DB** | `uru_chatbot` | Database name |
| **DATABASE_URL** | Auto-constructed | Full database connection string |
| **NEXT_PUBLIC_API_URL** | `https://api.[INSTANCE].uruenterprises.com/api` | Frontend API endpoint (build-time) |
| **CORS_ORIGINS** | Auto-configured JSON array | CORS allowed origins |
| **NODE_ENV** | `production` | Node.js environment |

## Elestio Special Variables

- `[INSTANCE]` - Replaced with the instance value at deployment time
- `[POSTGRES_USER]` - Replaced with database username
- `[POSTGRES_PASSWORD]` - Replaced with generated password
- `[POSTGRES_DB]` - Replaced with database name
- `random_password` - Generates secure random passwords

## Domain Structure

- **Frontend**: `https://[INSTANCE].uruenterprises.com` → `https://dynamosoftware.chat-dev.uruenterprises.com`
- **API**: `https://api.[INSTANCE].uruenterprises.com` → `https://api.dynamosoftware.chat-dev.uruenterprises.com`
- **API Docs**: `https://api.[INSTANCE].uruenterprises.com/docs`

## Build-Time Variables

The `NEXT_PUBLIC_API_URL` is required at build time for Next.js. Elestio handles this by:
1. Injecting the variable into the `.env` file before build
2. Passing it as a build arg to the Docker build process
3. Using the `[INSTANCE]` placeholder for dynamic domain resolution

## Security Notes

- All passwords are auto-generated by Elestio using `random_password`
- HTTPS is enforced for all endpoints
- CORS is configured to only allow the specific frontend and API domains
- Database is not exposed publicly (internal Docker network only)
