# Environment Variables for Elestio Deployment

## Elestio Configuration

The deployment uses Elestio's standard Docker Compose deployment with environment variable injection. All variables are defined in `elestio.yml` and automatically injected by Elestio's platform.

## Environment Variables

| Variable | Elestio Value | Description |
|----------|---------------|-------------|
| **INSTANCE** | `[INSTANCE]` | Instance identifier from Elestio hosting environment variables |
| **SECRET_KEY** | `random_password` | Auto-generated JWT secret |
| **POSTGRES_USER** | `postgres` | Database username |
| **POSTGRES_PASSWORD** | `random_password` | Auto-generated database password |
| **POSTGRES_DB** | `uru_chatbot` | Database name |
| **DATABASE_URL** | `postgresql+asyncpg://[POSTGRES_USER]:[POSTGRES_PASSWORD]@db:5432/[POSTGRES_DB]` | Full database connection string |
| **NEXT_PUBLIC_API_URL** | `https://api.[INSTANCE].uruenterprises.com/api` | Frontend API endpoint (build-time) |
| **CORS_ORIGINS** | `["https://[INSTANCE].uruenterprises.com","https://api.[INSTANCE].uruenterprises.com"]` | CORS allowed origins |
| **NODE_ENV** | `production` | Node.js environment |

## Elestio Special Variables

- `[CI_CD_DOMAIN]` - Replaced with the actual domain by Elestio
- `[POSTGRES_USER]` - Replaced with database username
- `[POSTGRES_PASSWORD]` - Replaced with generated password
- `[POSTGRES_DB]` - Replaced with database name
- `random_password` - Generates secure random passwords

## Domain Structure

- **Frontend**: `https://[INSTANCE].uruenterprises.com` → `https://dynamosoftware.chat-dev.uruenterprises.com`
- **API**: `https://api.[INSTANCE].uruenterprises.com` → `https://api.dynamosoftware.chat-dev.uruenterprises.com`
- **API Docs**: `https://api.[INSTANCE].uruenterprises.com/docs`

## Build-Time Variables

The `NEXT_PUBLIC_API_URL` is required at build time for Next.js. Elestio handles this by:
1. Setting `INSTANCE` from `[CI_CD_DOMAIN]` placeholder
2. Constructing `NEXT_PUBLIC_API_URL` using the `[INSTANCE]` placeholder
3. Passing it as a build arg to the Docker build process
4. The application falls back to localhost for development environments

## Security Notes

- All passwords are auto-generated by Elestio using `random_password`
- HTTPS is enforced for all endpoints
- CORS is configured to only allow the specific frontend and API domains
- Database is not exposed publicly (internal Docker network only)
